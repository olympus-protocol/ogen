package primitives_test

import (
	"encoding/hex"
	"github.com/olympus-protocol/ogen/pkg/primitives"
	testdata "github.com/olympus-protocol/ogen/test"
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestBlock(t *testing.T) {
	correct := testdata.FuzzBlock(2, true, true)
	for _, b := range correct {
		ser, err := b.Marshal()
		assert.NoError(t, err)

		desc := new(primitives.Block)
		err = desc.Unmarshal(ser)
		assert.NoError(t, err)

		assert.Equal(t, b, desc)
	}

	incorrect := testdata.FuzzBlock(2, false, true)
	for _, b := range incorrect {
		_, err := b.Marshal()
		assert.NotNil(t, err)

	}

	nilpointers := testdata.FuzzBlock(2, true, false)
	for _, b := range nilpointers {
		assert.NotPanics(t, func() {
			data, err := b.Marshal()
			assert.NoError(t, err)

			n := new(primitives.Block)
			err = n.Unmarshal(data)
			assert.NoError(t, err)

			assert.Equal(t, b, n)

			assert.Equal(t, uint64(0), n.Header.Slot)
		})

	}
}

func TestBlocksMerkle(t *testing.T) {
	// Serialized snappy compressed block
	blockRaw, err := hex.DecodeString("baa406f4c703763690858a72d9f2642131858a04d9851ee92d9ec56673e77d3fb5932a56f14b09fd3638700fbf4bba85aa8aeae84c164567dc64adfa58aec2a7a89eba65e8ea5b414beaaf132e8d6489f079b3c961bf6ed0451ab5b9a5545729ec85f3c632c95b2f0d7bab96703af0ef37c24c924d2d2af418aed281358919cd0a93a4c20eee6ec7dcae24fab3d4a82e13cb1d14bef6422ccb3625ea53a8cb6615c30f4c82314bb3f4e50939cc840d11bca2618a0c27b507b1ff2b51f580bc1c54a9e3f4bb0b19ce45dc4b6ff73e64e6c5a4af433a9eed2030a4666b210c436679a4db78efd5d56d2a7c8e7161ebbfe258db22db118c99d4c1bf4e83b517cdce7f2d210c08902675c2fa387047202599fab70ebaf28b3082705272e48a1bd76ef335087cbe9dd7d691c2cfeb1eefa7b5affe7b3428317fdc3594b962c052d51d15f5e9a225b8e46b0f1fc09f9c089d82027561bffe2f26f08f3c9db6247b64b9e9b2868adfa660d6e4fe0aac6048673551c53f42da4f6a151bd10c535e952738bad51899e19c902ec65abda3fab9a384680c5f608df948e596d133266fd421f0b139cf985f6001370ca5e07582afa24b890fd4686c33f68b71daf531ee0f5504e92f6b1c5fbdd50a5a06c20156c8131f55d4ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcac020000f867000000740000807b000050830000a88a0000b89300000a910100100000005f190000ae320000fd4b0000f744d5142375e08b4f913b3a2a30aec14cdfc9272206925a1130117afbeced34b71a78905894211f9103059123167764f0749f5411c06fc6942d3aed299a83046b4d0b159768acc8ceff645de67da707af2befefd929891a055aec153a8d354c1d3665a37c6660864ef7f8a65b38cdeb902452f3dd1c7ef028be0f2e3fe489f3ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdce400000000000000000000000000000000000000000000000000000000000000000000000000000000000000fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00fe1e00ee1e00091ef08b016355319b9d96709d89eaa974a739869984fce81f2693cefdbfa2688baf4a75761b95ca589ddb1ab83abe1630f95845d5bce6c4ebac883fa08057110065b5ffd9d45aedd9c9e5fcce5c522ff8419824111aaa258f01c31e1e0067f6724f6978277ab4b83beb0ea1e1dd4e86f104b5c4fffee0b5d02504c47b4a469a33fc6095e5ae09507041b2ccb9e3b3f9fe5f1a525f1a00e4fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419fe2419ee2419162419aa0100f08101d48f6eead0e18ab8f5934d938bc0f7ba48d524ab067c05b3fabc8f8b81414cb5668fb412bfb0ade7ba4c40d222991b0b2090f1122f6c8c75a470f7fa27fbac684beeaf0911a16eb6e3171611ee3b4d461b260929c464d9e65b14811b37a676f8cacbe83bc24cda3905db8d83ed67b584f412aea254729fd697110e347f95810caefe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19364f19f0b643c5bcd1c1fe620da73b00a9a335f384188d8b854b421e2472cc159f8759c1886f2a46e7071eaaea0e264b021e588b3932b4aa496464e8f17efc350989337570c3a6fe2ca10287be5816215cb73e217afe9a1d0739d38f9ae9bf9165f9216abde5d7fabccea5cc361fc7735f7b44aa957a83a383992708bbbbf8481507d4ce49ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2a25d4dfe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32fe9e32ba9e32c0997312d53cfc616009ec3da4d4a60bbaac3300e8fe4d88d9106b247356e125645868f2ed0243c8be827dc93a3483141faefe4e327a4e32c091e8173767f5622c8f307764b86a341e101bc7e57cbd03de24c739662f1042d6f034774ea37a48ce6a3ff5dcb64d4f44aefe90007a9000f0437cbd52a65c3a8c657eeed54104d18ab7dc9cd19c8eed15d6b46b86756bfb1158009079234020a5556eee90d858351856b4069e9bef817ee9aaab7aca2086183f24d60200fe20667e2066c0950c9809bfdfe68a820b72388d7e2f81ab18a01b5c2eb0c1a4562f73ab65a8e9f1a1045f5a27b94ab842a3effbe805f1aefe34017a3401f043ad393a930d4a14d24783b8da1cdced86129604b6843dd6a175cec534ce9dcfdef8ac5196426c440a0ffa481bdafb034144b82c48aceed957eeaa7d6859a83c7f4b5607eafe34017e3401c0b0d25b78e2dc7a1c6ac6d9b9bc14fd66c165b18a409b6098100f7b909270124f609b5aa3cf78123ed6ef1a288474abd0aefe34017a3401f0436c1a2b9368492214dba3ddc328bb64688e6f28c3a7d206f0479f4a534d097d1055bf18beab77ebe1e8245db2fc6ce8a21d3d77727153ec60bf79b008e69d4af9c7a09416fe34017e3401c082657caea0f847b82245094318204963ea64f5d6d09276f48531381a43f05f26906bfbe32e09428f663c87bb2f3887cdaefe34017a3401f043c4e9e42bd36e96d9bb3857d43043599d8736cef3991c72d6f4cf1bdc984e2e8fda71ef7147d94862c0f419fb59287cdf5b993aaf2e5627366e962acab0959558971c8c70fe34017e3401c089fbd55932769a54dafbcb8690c37298536d9bbdd1fe0e8b6425158bc777c7648488d71125b742e810a81df6f8f4a0b6aefe34017a3401f04376362d1fd5360f4d0a4ede88799658cb8097bec58d6547cd0e7710862addb72943e15e496d72cb16ccda26f0a2cc719585c0eeb5cdd1f2869c686c82fcdac42472a4b87efe34017e3401c0962c1cbbda246ae5d78d96a41d0041a8df07c2a77e8280e36239801f107fdcd5a67d906037d248d086b9618b350f3153aefe34017a3401f043db6fb16a68f79ddbb19fa90290a874684b5a477b857c207e894660d41af22e8e7e2858d68508b074a6e939ba4cdff8b5e35b10dad9c7e7eecc8ebf34ad62da5bbe6cacedfe34017e3401c0a599b95e2ae6c9ad908685cc311628a68e7bca2b3a0fdaf791922adfad1e707b9f6466f9032953b30ede785cd7595bebaefe34017a3401f04392296992ed90bf82e8055e5be22249c152b69e4fae3d75109988069aad99f683a427e84eca1de4cd38e5c43a304bb895a3f5e9f34148f5b91b30167fbd2cba44836948a4fe34017e3401c0aaafe7588554051fb0c3ecff5cb37f6b309dac2a8e01fff2ffc47b539c22fae3a8deb87ae6b8955b3a6f46ebe2de89cfaefe34017a3401f043d79a68bf6dd18c80781fe1d71fa7529fd0779c44a0fe3f9ae7d56a02b2053e73db3716de266d2c10a92152e461a8b15e6890dac18f6f2808e26e8670149df83cff51f1e5fe34017e3401c0b1a99c390f2f6fca3fb8212a1f2b72c732d83bc3a3d3734e274cbf1aec028fe1f50fa038e13d4c7b0322833ac5f36384aefe34017a3401f043c40bdfcac5ddc92e12e39b41a041d6f1504c9ae5938ae565ad217d8bf83d50f1f3d2e86e4c031c450113e3415a327933e05132c276159a0929b63baf503be86041da10b4fe34017e3401c0a1117adcb53d208365758fa741fb6908ced50f3cfd901d6f270a76d96c06797ccaf2ea497bc18b42119f13f000f21994aefe34017a3401f04342ba16a4bf3445e1e34490398813030a63584b5283aa679ec09f596616e0d6fca503495278a9459149959b36aa8ad5372c82716f380c21b0db13676565c90020022287c6be3000fe64017e6401c097ba6778036235f9b576f0de151f3b69debea1f603367ac2862e17cf3409a2c0587424ffacf3f032783a532c0f9fecf197ba3000fec0007ec000c087226d121f6a66d462b8987deec4bc14daa6e267962e37f6e8413eaeb362f54a62b7072577f9b5cb368b37b8e009591287ba3000fec0007ec000c086118603f6faa1c251509ed60e09503672057f95aded63fed95fd4d7a8259a9926f73fc43edf5bee8e63f675c7e4c62786ba3000fec0007ec000c0b5ad6bbceb222e213cd29df5a4450a6a5e4b6fcc98d4c9ce8c61e8afab24ac0101d697c81d37f9e4ddea1f0a88dde17ab5ba3000fec0007ec000c0b235e845745f3419b3e004e104d93cab63e29aa8ef09c8a291bcb13371606bc897894bf1b64e4256d0622c00b850dcc6b2ba3000fec0007ec000c0ae9911b447362b42c9a4378ee59440cc5f2b1595f6ecfda5a9739e58136e346100bbf010037d3203be06a1cd740d2686aebe3000fe54057a5405c0b96b03c5822ad1e1697b2c124212aa097dcc53a11d6956f4665f8449008884dbc4ca76657978fc56fb6b06c6bcb2d080b9ba3000fec0007ec000c086757861d01ab97ce6bd58bf48a25375c86894bef3d4dc755353b6a6d29352084a3e5706323ce53dc235e2e3033b368786ba3000fec0007ec000c082a8a4f5313e173b64142004ab07ec3ddf12faf9cfe5353f85a5bcaa98ac7658ab28218317426f7d37d184d98d36602982ba3000fec0007ec000c0842b917b89d7aeb904b3ebcc9228eb6302d0adf223cd0f45de0902431567fa77d3f72439b216a85a1a4c2736a318e10284ba3000fec0007ec0000c00ca9a3b0e1647c081abf15ac14c35112873515d89f12961b434c1bfe81b86a8b56b1ea51b617940a72e5036a80e0e7b6e35c03dbe8bde9d81ba3000fec8009ec800c0ad7c0bd4f561e2b9e61987d46a9412254109e9754a9b86efc4355fcacf7fc979bb4f26a702455be414ce5aa689b35143adba3000fec8009ec800c081cd203dccd7126ce1a6adec122d3e048c96988e086d06dd61770042ca469e59cda521a7c8bf240b4a3c7e20d369191981ba3000fec8009ec800c0a4731f409cdccaf57120a2199a7d1bc912cef17e6970b531138fdaa3983d27d4fb454f2259d67132d2dd729cf3b165d4a4ba3000fec8009ec800c08afa566abca485a1a3a92aa148896897cbfca136898d908a99de08cacdf9562501670b007d73bfd0100ce16c917616df8aba3000fec800a2c800b8b4c5fc8bf9fd5018dde31b4753ea5556554792f14c57b1860b2a0483961304a2d953f7b7993848475cdbc8c44e3da1be3000fec8009ec800c0a95e869bcf853751a460dddd5a2a4bcf35e65d0fea16bd30f65defa03d2ccc486cb141d2cc4222410163c9d0f2bd66a9a9ba3000fec8009ec800c09409444f51a1abaa9db75bd9fcf1facae4175cd2f8bfbffd9f3ecd8b18590f6ff1566ca236aa400182aaab3e8e9a0f7494ba3000fec8009ec800c0ae3b3dee10a2a786a62e2ce6dbe9f5e49edf250bb0ec5fb04938bb91fa5dae4ee21a2fa0a7001ea38d8123f4cf792739aebe3000fe080a7a080af108f4da1163dcfbb457bc7d1fac0dc8e5ab5ded13e18a716b8a2b62d500d29db06b661201b1c2cc77a211c439ca40a7d806cd0154e8a3fadb717f4ffeb1735532e5d2b72c5778807dbab2b07f95af8acee58d52c7f32a864e96a5d7a1224cb9e18e46d6fbd2e171f0c02af39ad171857b29497e2ac4bc201c35e26318ee64dbd6bd8f21c25e33f3524cd92f74869c9a930cfac9ae61a68471f094ee0e14e3cd252e6600bfbc5cb2efb02ec23f7a721b6640e54475dec3f9e7c4b871026cfcc148e6e3ccd1dca488fad1d3514c24824db609311a31849ac609e00aedfe308348ab4c63b2480a3ff87b48d1b969b72cf71ce1cb45ab8fd0305102e93e62fce7ad5441da38a4f19c5235ad0d0a2f0eaab0c43d2218c05ec7970c633688d287f4a0da8f6f8d9a5e8e09b1f3463e11c2693f75e6a510f418a9af6a7f4eb717212752b0268bd1b7ece7070dc408d88f162e3af06119586ba9aebfd45a9ab59d494efd2761289f7e61024232c28e53de1a159e6a9d84485da1c0d890f26b75bb3a811874e8d1a8506d4d38401c9509232cc9037899ffb2411c2073684577a8f89a21688f33a7fcebe47efb4aed96850a4897eadbb06a05bbbc1a613eb4f642184772e366aadbe39b0d4768b83e7ec287bb60edf434cf5e4d48622001849453f1211a91b0959b60ad7377edab3916dfb46e666770252246852386fa45e0df89495b83d6e22146b16affd83a8e0f6b3d7ebed0342b92a7621d27e6adc8596fe93ab09c2549b66306b16092f49fa70838275df83d2da690ecec1c510a76499b7599e32ae1d44b40f692350656b2ecccd98e92788f2e930eda24a12cdf3087644d26e81dc119dd53e7b56d6caf59d4c03b097c1fdbed0b116316d8cba30d3b3e1a3b2bb287a84f55c9d7bfac66320da9b672ba7d2793f947c9b395d696fd3458b06525b5df22af68547ffddef8180aa74be2cc678f13368e31e52eb631fddf8186ec92a06e641d13fc5f05f41d6cd9af8832d7ef02365024efbbcd6a60d594e66dae0907f4b3192e74ec93436c82301b09ffc3a38ac5532d010abb12f12e6c9cdb31cf8e9ce3ac25447fd4172a4fa0723462d7c60a50b1032cebc24cb79ede9a17cd92d6805151db4560b32782b9d304c5f7d74e23a7926612bcd841a663bcacb83fafa32cc798a0c706d070c2f11d0784c3bdff17a5985650f1144b81ab7737f9f884140dec5c0984157c1bcddd34e08768b50f4e21127839d35554094d6aa7dda9b8e29452032f0b61dcb477edda5d5a6fd54704741b21f65c786dc2f6c1c0782f34f61add497e84deaa3ddf4bf9c559a90ea132141e223454157b36ecaf74cb30d1b8888bc0e794f4a7bb52372081d908db8992fecdce2f4059d1b11d40609e77fd67834786ea99deb14fea8e2d770a4dd989979b4a35b5088f6700c4882a4583701973e9a3b79098fbfe868be156f08299c62906b6f99c3f26421ff6362e87db47012d18f386351d071dc1401354aa1b9eb530faf0c80175ced08bb535da02ef0a62866e35c0fa1a65473d281a385246a157385a62547df3b0ab5af6c7ad7fc74e2dc4a245df342c0d240a46f6164418059c839d6aa17cc467d8680649a29a8128063f7cb2db58b372d8350f1522297b487eb876e1f193483d8af63ac9e5269ea0546a10b707d56e427fd9cae7f8aa2cda52797f212801cfc59aed59c496efa0c4489f344f2d522f3f4b8dae97ef9dd5964c5138fb1465ea8f71a31cc48683d66233c93ff9c95727963bcd388dcdc3b6643b846e54476063328e84d0195ec36b84ed68a0be122d99484a058f13325faac80cceea73194a6f314c53a608f509cafb63e1b8d36082ad3ec8df847ffd7f20b69342ac0400f2b9b1795e7b626902a58326a67a0c878ed061e25f456036a7d1cdd5a886e3cf7835cb2d8ea83090a7fa1e4d46b4d2fe94a019df86e4effeb1708d80d1f383492858542afbcb8e669903edccda6167956a5ca779f47bc18a86a44a58deeb6c413a46cb393c940b80f6e8bc7c4c86cc519d0b1b9509194a901cde81b6da47057aad950b88a4ff3f67de3719b9678d610833c04902b389f5e4510f3bb24a4bab9966e5e29a93a40886d6b14a540c412a90137820784a433610242579c064b54e94faabb2fceb58a4c8e0ae1dda78350386ede659446663d1454d4385f5a6aa256050a56ca390adf4c3ffa1f6c500ed746d8b701fa894d8132fc08e380df4706225462dec27da25596a0ff45cc5829aa6c37ab5405c35dd62361cbdaef86271502101e16fad7365c590f7ed13e466c64dfc4664377dd06601531934f06e221218415af7c20d2023ee9a63e9d64007e23ea6a1025eb470bc0769ede151123f9eba056eb0aa4ba9a919ef65966e5782ec61e88bebd9d09aca90c22055fbc0480627a2d9e18f7c208818b10bc5169fda980a49267df1a10b669c90463d1af0e8122b1bef4506f413f4c2332da2a14308f6fa3d82297c5c7bde6b1a8def283c5d65c95c39e3714593141e3a99e38be5ee1b55092dfecdbc3c095a2433643c3abe898346c726c03324f66e4a2be753ee77b0ec7be155f18d347cbcff6cfb05b0ee5c5082dfb8ab32e8d0baed600bebb411291484115e031c39740431a3e74d1084cc9c77824a2dd195a9c1edde5bdff5d381400a05d8ae78b3b1cfb765d6c0b5b3f3251117b7c5bc4b290819330eaa9de836dc1f1412b16ac9d85e2951a5c4372199910a44079866d77f85a814a17a381ae665df5ce452de94c22db8216fa6a659df4e6bc7cf9bbfec98658b68225dc3e4e602ea35bae8c91984e8080a605a7ae132b6483b54dff593f730588da99245aa6bcaa84317645f3c0645ef7c17120f9ce50977158518a43436133373edf5dd294a4a2ab341ec973201084ab8e6709e8d933679e2c65603caaae245761fc4233cad38f3ef37bb3864b251089a99c86cc1cac7e7d4eba42476937a1fcc72291338381f4c0bbd0c06d0c5f12e67d3731be4bb8279b0bf279c3f2de948ad7135eb7cf08b15d47941ad35657839a27582c3fc4faba57cba614d7910128e5e9c16765500e0bc7d883d3e2c2289017240ee885fd0c356d7e6a635e210e3ffe316f6f0be1f597ebf2069ef6bbdcc5acc817658fb7606d88c3f3c509a2854f3ca2c1149bf2d103eee46f859276642c26c35cf5983101e714114c56bf8dee7ee68f924a5105bda2c9d603fe0ef07f0f82a2a072fce0de161c4feec10428a4fbb9089b6dacc6cf4c9153ae1938865c6e82e9b83a2d861ecc980be2eac8dd01d25434449e81e7caadc1a8b9e7cfb9a17901d6baf4bb3352a237477ad7dcf6ff288a94b8c34e1661c38300420e2a3a8d36759d76744190baa994c3c17524b5bdd83c8a977f2e44cd57f3ad78e5197e315f597a0c191ad85dc65d6ae2918a45f1f207d3ecc33fc0ba8ec9020940f2f0fbff7832429febf8540ea5f8eb2d3552b706116e224ba229428c9f09d6e37ea1d15fef63d1838399e9cb5130911b097227c93a60c47a53e5fa7b64469342c6a9cdb4dd9f9d1f156b4ad3ecac0e12f7db1248d72ce4b51ff37133f09de8978f73ad2e284556eb96636b926943bf2407442c0ff77ce8808ab1bd4d55df1754940bed128e481fc1cc1e2e4b19a888a7c18cfe7a52052751101b6360436371b9feb55ed5d619ea47f42a7cf01826df97c0b68a5359041e2b83b49d64b0d47a4b88238b047bb2cb2c2654deb622d930e24cb6ff0bf848a60f406ea7dc1287d9b63bab4fad684c2be7d9560208d9b8da73ba821ea0e6ff386027b749877696dafb0376d3c011d72efcbca731e4aa3298a01f21bbd6717366477b895f14204d7328384eb1a75ebfbd9fdd0dbc5f88fb5ee508860058f40d0dec42f48edd6fa390755ef7447cdc2b0199b2ad013b6fec691e2a3c9abd8e97d9d3a97f35e174c01ad33dc7699a8abd5ca3ec067fc65c4c4ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdc86329588c6e2c37422ba985a67846756da97355710c2300001c648bb41f1f0d82f9cef9e5dfab301d2d8491fa6039dd7206fa35b64f47c9aed4be8833d9f7299bbf83722829532f9b1ccb8b07a32788ab4d3a778a1c7aa7f4296ae23490789add463acbd785dbe136ddc0ca11eae576ef9f6045be66211f7bbf122d984ebc9aac06a5eba60c5b0552b5a2d9367800198ad061eab0a170f9655861dca6bd0a1813e9fd84c33ca0cd1a97d7b64a4f77aec9bc44d2f9f771cee1161d3a3ba6dae30814be9a7a8b45d95685abdde834d2b98c3b7d25a401b647d2e140f1f29817d1fe3b2b3dab4a11fbac4ef817eb4ba0412521278c9410842c11aa5a25443ba659c3f28fcc26d092d985afa1e0d14177c7d22328667c49b7f5ccd4b7a117d25a9e3a5ca56a45f1498e83e679487ede8e2e92ec3c638575f8ae5df435bad3108043751d0f7f92692985abd8daf14baae677b99495c0f168d7cf0ab852a7584177721a50d1b7cb2da661f75dbea4ad6d70a6e0aa50d74f75fdc776865b28fa7cf9096a07154e98e94afbb9991fb698eac1e164bf33d06e27e78c2f345ca5ad9ecdd3de226a8842de676799a5e0ed2e717f48c2c7b20693f30c4d9675221c4669dd22c978747edca8b87efa966ad6398f2f915bd0cd32851af764edb5d2ba1d3cdd33bea1ae4b55e1a8bee3effd5220d156457318fb411a67beef2872128819e2494fe39ffaa048b56e79addb1fd2cb7d5232c2f50e8b7135efe02912fbbac8df919704936471f7cddb53ede546436e4dd92d471218252a01634e607adf5a9062af880175b606f48f2d6464f0c496e37c37725d97ab0879f1d44f5bbfd3608fc4ee58478e14a54034e0f22b56a12b9ca87b75c8dddb72b6cb65f9f17d1b69034ef9fe7f61efa8c30971d58c3479fe119a8d15fada472bf000a679d90b62a1ae0495e7e7678c117a2834f2753e64f1cdb5458bc42341ffa00f8d6a49ef6109b2d0abd76be6e862b1717a00e2b6c8804259a8368903920143f32d734b5dff5cf69bf7514172560b03fd47b6646c98a5cfef00ddb5346d82638174c33c4bb5929fe981dd08d2daba33868d74d11fbe85d7a22b4786206c0f88fec7ca4f450e978175647474893ff5129f84d3cb18f5f7aca5344dcbe5a58a637fdf3d124ae5e74e76e4756598e8f14fd4492e2d4996c60b59832abe4ce18e28d9dfe9246b5d0f54a5da6afb26761f2f93e1e98550b69a3966c3e0a2c6c9cce11486d89a2bc2364dec397b494265466c93b0a4f0af0913dd21c1994e51de44d578dc378c9d080087dc3336ee69df18b8df5d5fec8897f5a9027e478db235f2a5f9584159d67def71ed230ca2a0735f213d635e6ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdca29990c9172cf528975ac48234d283a64af44da81a7dac667a7e2578af1eff30fc4830af918ae545270f366b12bb946914000000ba3200006065000006980000acca00000800000057190000acc917f90f484ece665286149f56e78e8dbb82f7956027cdcf444fb53c45090d4fee8a5eb1faed7a4c4a5fc328192c71f21c4180ea082afac830a4fcc4bf897324c8f9038318d95942e07bb8c3e8f0da05d224035391fa167b5e9d43cc4e57fc014691199ccc712fe1110a120440ed01eb05eb68768be9dbab156131938f8e31ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdce4000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000ee718fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100ca0100f08101db5218bf874fca9e404fb22e001d94dbd78c7c42a1a1969638c0909b62ecb07bc7398762f1a008240356c0ef069c8439c92e1de6318b99b709b5134c8bbfefbce4d56a744744ec939b7e3045941e5c01ab5f5d3e8cfe8fc4e043787546b5ed9a61ad18901b596faee0b1b4b66d5f350236f5523817f25bcc916c0b28f4cce62baefebb2a7abb2afe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5efe7a5eba7a5ef0a40800000057190000ab45e80f04c044fe3d18bff17b9877fba8f15e4c0348bb21cb8c1a26445ab0d712228ad42c145443701c5455e7a33a316dc3d439634cf7cfb8b070bd6f45c2207e0c2c52e1a7d024bdeb385acad6c0858e98ebb26a3cce62ab880e1e806b005f0bd30deb9630bdb6ce9ac19b9339a802df064f763d8a26630c8c8cbc757a2526ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c5eecec41acec4fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719ba5719f08138ca2ba3410cebfea6bf0e3acafff8d19d0af34232c78da572622cc2ad8a47bb68bdeb0af3bc299bacc27e186ab891278c13ea27401a73bdeff74ff42a1941ce6c89ccb0811f980552651071829b979b583144019537afdd084a89b3ff6074fe8e94057d55700ce79a9ba4c44ed92bdfc28db81dd386f1f8488d66caa247b7b1ae09fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe2091fe20913220911ea632f081cfa5b425f23576afe9fe5059c301d4c6674e06cfda01caa5a13f2fdaee8cba216bf1eba3fed6f2696d169f94c2519c5eb6f455522e9d014cbe014153574017eadd986ccf2cd7ee0b934f1dcd85ed953d8f126fd9c69cc160e775d8e778f21b41831907f5b3bf46062955a817d994a90c080fea2bd92d44dc1fcde746b32fb00bae09fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe5719fe57197657190000fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100b20100f0e50197d7181fe4b2a97da288cb3b7a2a9ad1543fcbac6309d3a48561b4b1f3324116dd0806495a3d4521b16a602c818e666c3e5705868056e7e872ade6b6181a0cd44645f21214c6f3ab2f9865e0ee972bdbeb88b901949cef1895cdcf7c7e0e1abfdf5b8284e55a7b4d808c0a1db931e0a1a6b8dbe676fd0febb574a4fa0073d863ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdce400000000fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313fe5313b25313fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100ee0100f0ed010800000057190000c98d633f56eca200622c95f2b1374dca5c12a30dcced57aa6adce93e1f1eaceb7a2c9a897e318dc424ba9b0337e7229d67d37b8a7f83792ff6afff1556f916268237eee9ac5e7dd28dc219c4380d504a6a7e5e91eadf8781f829f653c7404e8266aa76fa6d1b91cb8d9cd7dc5f1bcf70855981e5e285df68c88d7b7644cc8fc9ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdce400000000feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06feea06eeea06fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100b20100f08101e630dff2159a56b09a9aaada74d0da77a930f77457c4af9f793de52867e9fc85961d2154da4a562cb183b6a5d4042d04105051ec43042dc323a4bd21933f47df22437a6d944c1f35f286ee212b6c1b3c7cbb59f01823784cd4b41066c9a2cf51f05d71996934310a64eb4d352fbd38767ccc977f413498320d4ce52c8a025a15aefea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea63256a632f0e5ce4372b1085c81f1347dc8a115a21df7c550a4f69f891f49ccef51ad890c1701119f848f5959e9ebb207de78c5f1bb91caa1585b1c95d3b38aa61e2a7df0478a29d3010c99c81ca22d37a29047c6f4a1f500735ce7216d0930089f1cf7596db5b5f84696fe56eb2281b8fdb1653a47832bf81b15821e6a155a84f1eac868a4adae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdce40000000000feab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cfeab2cb2ab2cfe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100ea0100f0810193e11953a5adfa8e6d53e8ad106d26e19e138d809b0b4cfa1846f8e48e5b8a31555a39e52d940b634184c81c52ede503d7a4c3c5c6883e5ac8c1e91163188a31a991c661acbad1e1f44a45c382a74f34ea94885edfc72f6078b72917986eaa031ead8cf647b5de20803ca4e555a56142e577e047e82a325c9083d8e2717129a1aefea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea632fea63236a63200aefecf187acf18e0cd17fd5318e9309ea2d1f79d41b5884f22182c1d1a5a8cb6c63909045fe1fa34a5f4f7606af0cd92768ccc1adb6f45861681124dd1c7c47caefe98007a9800dcce22beac5403df9a983926ecf1cc01fbe7d4541735b61e80ba3a7242e1c04014b66d0148134e792c4c54b586158505351d0deb7a1025798d")
	assert.NoError(t, err)

	assert.NoError(t, err)

	b := new(primitives.Block)
	err = b.Unmarshal(blockRaw)
	assert.NoError(t, err)

	assert.Equal(t, "d47065977fbdfdb81006e9450bdcfc8dc625c71d2b8e9320a0d4da7ff2f83ed5", b.VotesMerkleRoot().String())
	assert.Equal(t, "2e7f67d61e7edc39410e73649100015b40950f1fbf989d098761518355b95349", b.DepositMerkleRoot().String())
	assert.Equal(t, "a8755b0fb5827b35291bb310f40164df59f7dc707adbcfb2bcacb11f6891e19d", b.ExitMerkleRoot().String())
	assert.Equal(t, "363a1e13d71ebc4712fde0f1eb67c61259ee99848d4c834a4f4045b64fe56b7e", b.PartialExitsMerkleRoot().String())
	assert.Equal(t, "515dcffb2679309fe34f160787736a191f2da62842e52636fe5493ad9b8f8d2e", b.TxsMerkleRoot().String())
	assert.Equal(t, "2a005e7852cb8dfe563c9627343858021b90af2e067db34be912b57ad80d2f81", b.VoteSlashingRoot().String())
	assert.Equal(t, "f8bb2585927351c1be611d601ae6f767e2ffdc6b03b3f022425081da2aea4d5d", b.ProposerSlashingsRoot().String())
	assert.Equal(t, "b29eb9bd665f34f20a2eca8d6403c66284f19e0c223eeed274fccd7bd2463e2c", b.RANDAOSlashingsRoot().String())

	expectedTx := []string{"eec9cdeeca23654613ff89f169ad9ba30eb4765e1851ccfe9871b7be1cd0f051", "261ec4d08bf0a7f1a95dd7af05a03a468d9b2d145bf09e6fce4150724616851f"}
	txs := b.GetTxs()

	assert.Equal(t, expectedTx[0], txs[0])
	assert.Equal(t, expectedTx[1], txs[1])
}
