package primitives_test

import (
	"encoding/hex"
	"github.com/olympus-protocol/ogen/pkg/primitives"
	testdata "github.com/olympus-protocol/ogen/test"
	"github.com/stretchr/testify/assert"
	"testing"
)

func TestBlock(t *testing.T) {
	correct := testdata.FuzzBlock(2, true, true)
	for _, b := range correct {
		ser, err := b.Marshal()
		assert.NoError(t, err)

		desc := new(primitives.Block)
		err = desc.Unmarshal(ser)
		assert.NoError(t, err)

		assert.Equal(t, b, desc)
	}

	incorrect := testdata.FuzzBlock(2, false, true)
	for _, b := range incorrect {
		_, err := b.Marshal()
		assert.NotNil(t, err)

	}

	nilpointers := testdata.FuzzBlock(2, true, false)
	for _, b := range nilpointers {
		assert.NotPanics(t, func() {
			data, err := b.Marshal()
			assert.NoError(t, err)

			n := new(primitives.Block)
			err = n.Unmarshal(data)
			assert.NoError(t, err)

			assert.Equal(t, b, n)

			assert.Equal(t, uint64(0), n.Header.Slot)
		})

	}
}

func TestBlocksMerkle(t *testing.T) {
	// Serialized snappy compressed block
	blockRaw, err := hex.DecodeString("caa306f43b032e49f19a6cd0878db40dae59908f986beedc331226a0b8cab2f22bdd8e3715f845aa0fe9ea61f3213dd0c81928b5ebe91c59df1eac926a86c5fb6b2006085added3d704ec6044a73a63c46072e107a12138ba770bf6213e9e89edf25ea69d68302f1d655d2df0eefaaa350d9d41a8d3087b06788b0bd8b5ba9875decfb4358a40d6381cdfe4977c205d3166d1ed6f905af31815e8d2e257716ac88c64d674f948d68504d7bd596bb33f060775e65402f3aa703cc8c9ad450cfc9205b733eea3eab14c9ff0ddaa2be17f41740513ae7d2e57aa2ec93751755ce90873672a45abe672f2dfe1fbfe247836b5e62037da59f304c7d5caaea01941885b01477c34d6ebde4e5659b28809263aa85c0dfb9d6c54d3f05ff41010a547e0d835be79474acb8a3262debfcdeba0d2d27ebd32c87b91511636d7ad335735ffc2900e7033d7f627bafb08270870bc8b13d5d405271d0cfe35b0535faf943633a1a0f56931ee092a76c294f84b419e9b22694e475cf0ede5e15b3e4e8759c1822278a3fee45fa14392fa3a9f7d316a95395d5df9928ceae8e64d4da638eb69f31b8d87795a9cf73b97ee5802a78df371c735432798bf12fb830c12e2d719f05ba23e69fa73b82c6ad809cf0c1bd22b17e72e7ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcac020000d8670000e0730000607b000030830000888a0000989300009a90010010000000571900009e320000e54b0000360c66304c1b0f1829975e6f9eb5ea4da9a59573785179eca51c571e1937543b12232bd5d90e8f34492d1c5ef14ee265534522453a6b1482c11eb47ecfe30a3b203ce923a9ba94d8befcad7cbd8aff8d7a5c1e9c79bcf4dae6a7556494607a9006a8c3592299045a326dc8ddf4656b4adef05df9937ad01bae09507041b2ccb9fe68015e680104dc00fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100ae0100f09501c21dc995f42465a8e76f3b7d47d3bec7439d2bfce926cb1155e4ac1cf533d82410361adaeee1468ad3c11340679dcda0944487ac5e066c7f48c66fad1a88bb5bdb7ddc8f77388ef7bd3eb3155e46ee70c2ff1c0e9c5ef5d18a6b790d1c9a984a624528b6ec43e41a1beb6f8a971b608ea5bf883fa2361ebfae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c5ee4f1a1a4f1afe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719ba4719f0d069d6329ffd7787124e4718f00855730c1c5f9469eeeac3166c8711c2c44ae96c376297b90b11165ed652cb3742cfaf5f7d7a062bbd06ae04e55006d2c58685d30f304263555138ab888c330a94439dbaf96a58ba6dccb3fbf966ce610ded808c331d7d63e526b61ca4445fce9064128ff501138ccf8c20caae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241c1af633fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719ba4719f079669ef34811ae14240d44754e4f4643062909963021e620708c214377922faf2a8b2b37665c8ab8c93baf4e2bcedadb28c49419cefad5ffe56b92ae55f1d5d20a6cd47f633ad52ab746028558e17cd248cce359bdadd9ac1fb6b132ef368685de4eeb78439f1b55faf2ee42b282196f1282689e0624fe92feae09fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719324719c0985e7136330cabe2a57a292225f5d0e6fd5b48b67540e4be08af96b99a708d5e193a134f8fb8e6d704335b1b08eb601eaefe8d4b7a8d4bc0931e8be2a4c23c8c0b43a387ebf87e7c781ff05b310f148eaba6fd393f372b485c61ebbede91dda9fa04bf71776273afaefe90007a9000f0491daa1f2a5d679ea2915b59d5e1f6af9858553f5197e0f96907e1d910fdfe8644d5abb9d2df985303f70680cbad29730c508a2d43935579154b9be2eb7f18dd3c6e8fcf9dae09507041b2fe7a33667a33c0b23e06a0e046cc42b821b707494b924020a6d4df0129696bd49722ddb704430b6726c7eed55a006c90af59eb1028c26daefe34017a3401f043632c919ddd302c7a9f753ae2309e4aa0dc1c0044ae496ba641099f97c6d420f0270720a123ec24aadefc15a2ecf9aae01258fb2e359b59ace5cae41e0fc7dace5b98585dfe34017e3401c086be7e228f1ae2c9b2c9e693cfc470d5c74b1c9919bc1e1242d47574f1f8594f50a6f0f13976779b1ff03abbb715111aaefe34017a3401f043a2c7274a9eb4b6977e61664ba28d2121ddfeec198a5144b8ba9a9b965f3c04f3f6c985c868cb3a68e07008ea054de098ee676fc321da5f74923dabe608cd3b38d31c26bdfe34017e3401c0b4ab3c2676e2f5aa6e4c325b3ee719e4c8b9ab514f7a04d8fb14b005d81b65f0957009468b1e117644a318ca5af91930aefe34017a3401f0432b29d4182626d7afc64dc1445022dace9239cee5b69834faa7b23c2503edfec865f8d611a9502ca69f0b49080d8ea5dd5646a4a5c52f87bf294788d8a64e5d5f8ea0a6e5fe34017e3401c0859606a3002293933eab5871544c9f6fcbc1b65add622cfc9ab2354936f568cbc43374b0eb8afb3e7315e4c256590b17aefe34017a3401f043fa229ca4e348971a1b2c78ed4dc3f934ad2f5dad8bc441a210c4858776e33c469a2c08b968446f1028641a61c3823a3bec473d3e0a89398d6eecf1ae5c8c750eb96ecb62fe34017e3401c0b33a8b6e5d94cb25bd4c66c04c4ee8e30f1b400d9133ef03eacfbd0b407d00c2a570ec336336bc69938cd344feadcce5aefe34017a3401f043dbfb4de6dde995c1614395e766a83b39cea9a7dd8e721796f009f262bde43b8b82226815360f7233dbd42b5b6769fa5ea7ee95ce9dcf0a3dcd474d4c512e4650af4f652cfe34017e3401c0afba133bb2bc95ee265879a719f333d2a147a68e70b8bc4eb53776934a5069ea6c421809ee2159b2409ef419fb2b7a70aefe34017a3401f04345ab34c72300a871e8181296a64fa5de3f7872fa98e482f7bcf88beb4090cb02b3b96993d0073cdc79abcc47f7fdc486888144a37831db346bc052ac3cf331514dd8652bfe34017e3401c081649d58b3ea5c26ffb66c23a82954c3256c87b6f6c20bcaedb97e9149e434ded63fa17f0dc10a4db5ed37a088ce4989aefe34017a3401f043c7af28c8cfc6aa1c3369ca77f4bc10d6affcacfa92ea4f5b8db763d71106968ded136da058b0b22c1ab9a2ae9b425f3d649df2a1b662be78172daf1c2e872a84dd375a39fe34017e3401c083564da5526335598030f518d39022da495fd93e08fd6b9bdc8bddfed56b3e5b5d8c19b80b649533edcde0e9e85fe5cfaefe34017a3401f0439bce95eb0ae9169b1d3a79ac84ce4224eb3fabb2a4f1539ac387e004df5c54d4c9438672ce2782ba8497197f3641bc98e26d50fb318d454a69bdae96507d73a85f9967c5fe34017e3401c097eb37ed8fd7be5fcbd7c06b1201c5d15aeea97e7ab6e9a5a3f5f376d9fe1adf9b7024edfca3ab211fa7ae6e7f21a7e2aefe34017a3401f04389a11929803ac45e8ed745fb198489639e2ea7adabff9ee43bc173340d14d475b35667bea01ba510261cfe53621ee785e7d6826943e98651e50e62349d67878ee3f7a6c5be3000fe64017e6401c0898cc1dde6a113af23860f3d3e63f30e95c9111030f67dd30ab1e86f60037d88f70fd3633b7ce6db6b96c27328f4843989ba3000fec0007ec000c08189e20953fcaf59bb0444219d49577f1607831a76db4017ee52265c3b330e8a9f56fefaf24b8c91cffd8e0538b00dd981ba3000fec0007ec000c086cd745e63add913b6c32c9eb8fe9105a0fb07ed4af087debb478ed17cf7b5a29d50e0669a0297a63c200f9d3616b31786ba3000fec0007ec000c0b29fa99392e13d5a1b8d9438427ac3be79f2b05df5e7d50e7160e81f8419171e61164335d07e217b0330c603ab96e8b9b2ba3000fec0007ec000c08e37114e83a90dff9763324df0d69a4241bf8066a62cffc78829279b1474ee6c9a64386047f62ab83dca8f2e138b30798eba3000fec0007ec000c0a996d4ddce58cbaa2eaa92b6edf0fccd694ae455747356b794d3ba85e75d9b40145059ebf8b74af6192ff3041a520003a9ba3000fec0007ec000c0841c7d69395b1c7457e1b45baf10fdec3818500859049eb99ece3ef4e344eaa1f171a64dfe5f34fe653d4f7021e6aab384ba3000fec0007ec000c0b6d12dbf82c32b5d6ef25835df142a3775f75d330fe34cd3149360ba14a2a577f5faa6398f168bca98af85a4d65b2c76b6ba3000fec0007ec000c09861fbe2a39d25f63fb059310518877aedf56ad263ef8b41e39b8600bdc30414f72481ebfd40c9e088081d61afad684998ba3000fec0007ec000c0b3c403ac8c4ed67fb332079004097a4c8128fb8787421fdb5a6e06f6d809697c934c71da43cff62740ff3ea09cd1ea8ab3ba3000fec0007ec0000c00ca9a3b0e8e78c0a42eb56dbc19bc1be5b112331c46578ceac8c98bc17ffa76328f5c012e54cf9b4a77c00b36de6710cb79ee6acebfff78a4ba3000fec8009ec800c0b87379fc8ea93bf580e84b0ff18c45b8b433606215e2365ccb42e9d5b67cbf65203d0a2bad941a0a08ee7c6741427c17b8ba3000fec8009ec800c08b103f15ad68000443f5db93d4491730f1ce95e743f2eb9f9a4c75c68059a953dcc777c3dec2db173cc521c4c1c87a488bba3000fec8009ec800c0a9c14d21b8cc214aed98089047212a12e2df37b906ae4db113342a80777186338fa3b2970dae6dba3ac38fe383d45843a9ba3000fec8009ec800c093cb4877bef46620880ca7b5161529ddee91dce8cf18205c963ecdbe2753686a0c63da6817603d6f27510e9019c463d093ba3000fec8009ec800c0a93eee013231cb2177e6f2870103b66a42b008b877e468c1ed51f6566e6df62ad6f112cff6200d5ef84c616e7241ebb4a9ba3000fec8009ec800c0b08556638ce1f51ba93d745168b0df9d58b436e36df7866ed8420c4a6b2f848f280a593c579d209aba5244379b41a023b0ba3000fec8009ec800c0896bc57d69442b1ca76064a107848532db927a5655c19aaa62e53a5d49bd1bf74fe08002211059d45d778dde7f2a76c789ba3000fec8009ec800c08b4ca6dfe99771fa370a72eee1a77521a537cf04fb9c6ac1bddfadf8bbe7bafba2e2356f1710361bf32c53a58f813a1a8bba3000fec8009ec800f43a0b84a3b44b3d87bea284f0beab7479f2b42f23663982b2d1352878124813136f2c396790272e4940ad31ff8e29615ae6b42fd1f9556824d7eadba3ec02c82890b3a6f1e242abde904e1f40adae047f28c9469c3e67d6171e0641785e5aa4903e0130452d041f326c32ebb5f63a031a5c7d6db49236a0153b16186b68852789232bd13db952590c01a3f477c776042c9328b2184035a2e3ac0875bf2e20c0ca6e19f1a729c8f8b7858968a33b5e36e9243822e2ea831607de898b19ba4d46deb5cc3634bafa7b73aea89cd6bd5200ab2eb493b38387f95d36e18818e66661b27030994fda7222f53723ad5590a4d5bda0c16df8ed6ba0ceb988662ae53a9d66355c42556a4ac90f09ceb2c1a67778285acad3ab74f90274d1388ea35e072fde22a90af3f1c2f6a7f358266f8b5770833424c91f7ac6021b0e67c62731a4bec862bd8eab6efbf992ead7109bf9685a89e19538ba7ce64bf1e0615f0ef0dccd5d97f16b20e5a21d4a2042573c235fa868820efc95fde15a7f0b1afcd6598a3b75d0aa0ad9d7341bc7daac2b26547c9050e59b2d7e7050caec0b5d25cd9e342ba1b135e14ab4aebd9a56e9eff5a465c71e790d2d66af9777ee9f72df8a177926d10e571d63d52fa4adadefc37efc6bea64433db01cf782975b76dc6d994f7ec979db1e62e3d945713a6cd689704ef2b0af7ed014221fd0c28a20a430d25c0960a8e266fef67aab194bc7ef3305a8e20c13b5afc55b983227754f8c81e1d00b54101c0a3b8e30f27ba24cf6964410f89aa76a824e6ca3c9ac0816837d24095e1d2826a60a824ebde33a00b1b7214373f48d8a2b8854df2167b40a456c8d5687bc82c23d642b1208b485cb8c9df3f17535acf9e94da3da336f5e82a4a0bcfd036653a896c5d07006ee214b94af0c8f8ce73d31adb52078f994a1ee16b05c7b90ec4109c1146b77a22171883803431c3c76c0e0dc46384076aa9bc52bd11fee788d1167381540268b7b4522cc15f6d3f4f6729b79cae8c7b4494d89fa7c387454db4634af53a84ef43dc7ccf84e814fb683c08a76896fe51ca472912b06c99ea290254a66e75439b9a94b7909bfde039b8e52dc8b97d980e968b65a28005ef3e22771be12ab53b57b42eacadaa0ce3852e425f67fe33b73b24bec5d4a56537ce98f4da5ce1b0b4d22797f56c2442c6549a29c51f2d37005c7fb86717042e5b8aac782a454a4dd6572589732ae8e7469e815b15b99f8055c7d8038e41589c7a0da05fc57990924b4d4208fd461e1b650086d6a418bddf074cd7609249afea7b30f9fa35bf01ce7452f23add1d34a22998c94dae22967307dc7fdd4455ac2b5faf2ddff272a8019a5057add8016deedf98b2e2f5363cb320d9eb5ed9094aa7a1f8302b3658d21ad5bd61bb2e678c9dcc3403ad862e09dd1c698239d64a5f44b0595291ee571568fea6ad9e5d41ab0223a60ab8dbc8844563d5381f460a9142702872cb265685430bb4935e2506723b8cdae9f79344d93291818361e2a580f7214a0d87cd9cb5abe56448a0c2acfa6523e1bc12899b23035e7eb9c4b5ada26938782b0fd6f0bf07498bc30cad1a01ce940408d94619ba7f4b0984ab37bf85661fab185450ef46e8cc891888707eb68d24badaa00c9b7dea2847ffb13d2eb7fa41771711003de015cd9123267ea411d3c72df507bbf9a6b768181a6da9c0fd466672286dde421fe51a0d8971c19abd5d23be5e500ac47c1c8be694f86d7ae33b226743c6251366be587ffb95d1786f84404588c5f75c0ce1d90a80fc2f0132d50ba05f93bb4986c266fa3ee648604f599ac2e3069eef65d9c8934ed0d092e82e9d1d74aba17acec4c823b11fad48bebafc052f351779e416922dc5188fff881c281eaa8bfd3c93ccb22983e85c344aa005926810e10e71be8c3a8b04b06f20c21676ad5c3e901fb7aab8746da49b16b1929f4403dc28e83cc3d01ae5abc7696a255e47df02bf88e812d9184806c6f217e9113cd96ae7aee57767849f1dedfb4ca54146ea4ae620a7f1fbf81268f48ec9bdb0fad95390606b623d1f12f8ac5021d8bb8984f9040e9f5ffc81ac363c17e59f62b5077f036f35ab02f571388f05ac9894344b79069580c67a1d371a5566f3af2a27a139e4f0c0d9660839a148d7df527e8c82bdfc7ba61335daf96cd83fd4751c2349bb491c815d04b850c2c2412ab62d424487d0bd244e9af3a205f4b5bdecc3bb531b0489b53466b1b07418bb64d7dcf827cb041e7d41b40e8363a15cc4a8b921d05e94c1878a3abeb24396b1adf09c8e7d40cf81bff425f0f7c8f1c37db994d0d0eb60498486d79620d856c5077e55f43774b9912fd27d5848fe0b70ed960db0b808d1d1705245b256a083d3edb3876e93f63f625ac3cb7207fb0b775f8af063ebc442d968aa5f88bbfe0edceb852da6cf0230b19daa3acf04a2b50b4bd1b6016f41b483fa313462549b8b8ce937c5a07c6c2e58a913f0f1eaa6a371c81dd22a0a58c467c74cfa3960328dea7ab6e46f3d3f074df9407d07a5ced374afce229bcb910b5119b73cb148480818dbcb6857813b6df6453f7770fa0d2c901e4c2bda75d01152dc488aba7a329e96ef9444e63cb91de85da320462e76fed1f03434213740fe49fbee78e8909ba9df0bae926c15f20ad90226006b1465bddefcac0cde30204f69b3f75405f12dbfac6706a158f8577b043d9acf76b1e72736054eaa6c9e707943e89cb9b926b8120386c47893f39bccaa8b34fa626bdadb822e20dfe7e6d40f69c14d76d0f38a5ea8394e480338650dd8587a40a6d879ba035eafd7c8fbdcbc106fcd502121d1563d3ebb3e765849abb4c7ce3cc5e7de9931bc6369e0487f119aadf0237e827827fedcb52b66c72161e0a881895c8cf92fa69e1967cce8c6cc3ee8d87bfb9ab8efbda80d47f034d2591b6f6826ea2f3062948013cdd88d92306bdebbab6e5b83d90d4ab4f0231344e321c6dd78f11971689546f4431528de9a72420ae4b08cc5dd528d11b912cad6ed83385ec09f35deff24da7a86148f857ff82f528c103e6f92494da354db5f7c59ad47de81ffc304631e773aa0b93cdade03e7bf5a69734b26707881c3d934e2a62a110e5de4d5d0c7a405583c61e359320d001ceeeca5e5ac136a2d15564cd6d6cce95da561607a123a28b2aaa1abe7c01a14df958102b266d20d7b1c625454d73bb082c58cb53e49c8395a4090ae69ac73f8baf2b749bd97bb8f71b7146b4b0ca623e1a6f1ee9104cdc20e3b33a3edcaf414d9302227f270f91e030737a9eb500d6cfb9b686af591a490990d783fa678dda1199bfa101a028ac76fb1eaeae1b2deee2e24ff5c689ca26dc29eed7b46448a3947a2058d60e4467cea7da5a8a90448d1077c6201efcf58f2b76d88d64bfffba6f78d4c8a566ddf9c5f288f6fa3ef58a88fdcb2043044a068bba51f6457a4d8fde4514a750433c11c08813e5188a525e9a5ee1b8d2e6e8ded3aafde799af6647c8d103d4cf29e4adca395767b95493003857fd65f83544be95f86ae8ea5fe637758af654f173c7be4b0d7b28228deb87f169945532348cea8454a3948b84f5c32b3e0a2bb8ef43bf4bc22db70eaf14d936bf8d4bb7f5dfed18e611820f97f4540fff65a7e0f0c3bfd6aba7d0eb6d440cbfdf1128ac09d171016792caa2cdfd72608967b2c47814e456bc0e985743280b448ec7d131e139b3163054c7f0bda3de6d29225d9660d850a730be33c4705b8135e3b4aa8b85e22d900c944fc8b0e502d3ce0441642f7054b831657febc11ddef2b09e725bfa1cefc4e39cd8f9941fa7be804eff32456f736d09ff8249b5109598abcfb7ddd70734885265e885244618b12dc4785306312b86f9978221665c309b8495f6a5dd395baa9ad908363818bde313bc4ea7d7f805e27ffa2ce3bc49e47c4d538eb1583304ef3c11c6352badae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eb525e58feb80b7eb80bf4c703a3d8d573428174d68fc77ef4346adbd575239b364533ac93b21a744b77a1c713183db5160065c6a5106894cbdb21e677ad81d1608f7893d7a3f6114f96c071a29d245359927ccfd403cfe81d11b136da19dd22a45c2c216db8c1ceee2c46b2d576875400b6bf21efdb0c9aeaaf0fc762daddb7aa7e4eeb69f4d0980d7bda02e08c6983ce34005e2e5491b6a3fbef5dce2466932f6f5c9a1d445d414de4cf2a2ea29faa003f694a65668cc19e51e1cd8cc281c932f35ddbbd3bb4cdcbd5830277321d9b7d33d8005f4fd985bc362b1d5e624c6d9df3b6d70a7451ba019fe3fa7c3f829d4b4d94806d11cb028e1c76cefacd60f438bd09f67cecaaa752267e0c1d9c7c9add2f5ef2ee82483092d00cda82738d7377d4df1fd1a7bc425d70731bb7f2e2d53cb7d022ed3093e03f74deed736f0ba2d5e309cf2f5c04e07f0c48f632016d903792431dbbc3b5db7810343d2da6f3cd134b8de2005e82d2133064cceecbcf7620333bd530532929d4984a97cedd0fb2c26102c786b43ada3dd49f86e291d84441487ee40883eb1a09a4edbc175f94d019a219c73a832542be7d2233a78c66f99dd59c758bd312e4c7d4a537f5d7b0b873fba359232b1e0b6fa9d52adb3ee45c6a5e05a4138fd7868f31c4ec9c03ac15d1857161973cc76bcdd012a4cc5e6e00d28637a41567201f6205dbe6205addef530aaa35db584d3b669b3c1462333a9b56a02e7b3ea01d5159bf4b674476cec1d85996595aa4ae4815122db43375250507d6731f43d0f6640e63d4d44b7b4f0f0e5999ced3abc31a22fb866374fe8577b46f61814895654dd1bf3862eb094081f25762f7691f93dcecc8cca9d4dc004d6fcf0b7fa08eded394171a9f45122ca8b3538442dbb29166c079bb6cac74a9b4d0583d08dfc469e4554087d50afb811b8fca4c959de2641a3da88abbc641b0b9635523053fae75a5ffdecea0d316fe08b26970fdb352a9fb6d9be56509e3d0bd1cf0994982d37462bf35a0e69841080115824242875ce12deced73cccf1d5c4b2ff98505e6047c6fb3ddf931f6bb48eb54e3927cd3121d178861cc12c2412a4cbc62c1192b565e0851018e6649daddbd6eaf553b66e41b370099c36c8646ec167a68bc29d23c70eb65e77b6f4eaeb18ef8540f7a9e16b3430f102bd79b2a0631384ec5132971ff8e60f0200cc5bf6c4f814411d865477f17480e47488c9b5e3db93a9c00c4af3990b37c1300d97075eb5495d74c72c069566522999653e6897b6123d54e7e3c942004a19e484b9a7270bf7b4e1918af5061d5491298724fe227d26fd2885d2a1391945fa3f5b28e8f7a43ddfd7a14f584ca7528af1fb53528aa80d7c8aa87fe28047e2804fe60007e6000f0c9a71df9755001a889cb137fafa28a10420c5ecadee662a72bfd654e04714f49f8d5140692220d2c226be6aa1658c3944e14000000aa32000040650000d69700006cca0000080000004f190000d454d83b6a8b2cf2139427d95d743b7863aafb2a21614d1816f1bae50282fec318b645ac5845b828cea57698258aff7f21c6dfcfc75697ef3ff9d9ab38b90d4d396d9739c473f078b1702fea0297eea8a540efa9a2af748e50bb3bef6c65948e67180ea078a234e1d91ca3d77410ff9078586f0072d005d4ae09507041b2fef02a66f02afe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5eba6a5ef079ec78c194f92a5237c51832ada6aef7fbc201f243f67fe594f505c44a8966cb0b9427c2eb1652af9a9fae97e9b616a1073885ee61ed2d399d5af04a96a25505db406f2506925ef4edc9c20f714fe79e5ad6351d68a023bebd826629a413e30cf704b00f52d280245944ac321eaa3c4ad4f3fe47bc03e5a5c2ae09fe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5efe6a5e326a5e1e9632f079276c0ea7edf97c734b7a23403712909025d61fcf6ae27918ae6e66e70d2c1f24a929392c80538da112aed8b4a74e862fbd9d3d4887b60c9f618705bd5575da59c655b0f7daa7715904360d3c3ee3d8526893b0a322c240cbebb563c7b91cb4575d31271e2ae63fcaf382fccf7bf41a932fea19dbfddc6e54ae09fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19324f19f0796b92788c6cb19e7ed0d9f2a1a1a9a4b5acb6445a90284c263a11f82bd6f3f1030f619234490d72d1f641fcb33f2d8e8a7fc82d4d9813ac16d62c2b5036ff99bd6416753d512662468ba3f5bb0e4edb11fb98a1ef3c51dbd6900fdf49cb5c13bfd6090f35a554177e5e6dfaaa0785eb92e16919a75f3d3de9ae09fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe47193247191e9632f079c26ed4496b713bb1dda5e23aa82fa7d8ff463782c4ceb95023c8c49a762ab415e1ac5814744858e1fe56dcda00d415ba4fd7e4ba5138fbaef798e4506e1c0289cbf90dac8f55f0e612ad9f224049e04b34cce1c345259d0539de38dc568e7b595cf9c6dc6aefbb1daab367ffcadb639cc7f037e67758276eae09fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19964f190000fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100920100f0de012151a9a2bef5494b934be00a90df5bfe22a15edc8cf44e8c059ef081fdf560f95f19e072fe5350c8ce601aaa8e9fb5440452d07ed0aa17614828cdb420de1206d3fb9aa55841f3790b0f659245234edd4699508fbeace636300b56d9e4ade7be7991069bb5ce8d951d44e665a226afde0a75269f1eec2714ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcdc0000000000fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413fe0413920413fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100ee01000d01f08101080000004f19000084b0e742cce1a51c43032f47ed66bf1f31a6fc1425b260ba0f9f6de78fd2d40fd724a52cf31c9650fb022c6905b31117514c96fc42b7a63a9e4e524b51b873ce56c04e8c6e45bf721927047387d5a9e6f5fa9a9055c4d0d5f06540a9d20eb0afcda616d1baf232f2741f4d89bb27e94b9e56da5e85fe9da4aefe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19364f19f0de1cfd130b15cf2cf1affecc451711973bce99a337af433175ff405cdf332b218519a9b44809834c917394be188162df522d174ab984bd2bdd7ea292cf527d372a4e1dd4eb04ef9ab9dd7aa02afdf5a462d6141f3becfa9a9a6e21e8c488cd84de53e9683f4737cdadea8c4735237179c37067b692950abc59ae09507041b2ccb9e3b3f9cda71ffae3dc8b2c83f331ebdc98cc4269c56bd4db05706bf317c8877608bc751b36d9af380c5fea6bc804d2080940b3910acc8f222fc4b59166630d8a3b31eba539325c2c60aaaa0408e986241cb462fad8652bdcdc000000000000fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220fe7220ee72201a7220fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe0100fe01008e0100229632f07956e18bbcdbbf7803766b26b966873a0551679b0897ee045d8929d4a99af69548f511862f5c870ca454b2eaaa250df7b505e9aeb258b9640df878204fd07b917f0ab085d7c103ce96c7944bdbe3532a90c9b43d6d1b1ad13df477841f40462260749854fc757418784a2e32a46c3bf204e367fa5968a5e20dae09fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19fe4f19324f19f07968c077535cedd895489c42bfb5635fb66ecb29dcc738a8cff666884adfa3b6482b4c4958477e33b5a37682bb1be3d2802f22319666dd59f7bf6ff11f71f481360fa8121042a69eca2bfb212d7ad23a9379629d194e83ce79e19319d68c690c741fa38f2af47e60a959b4d07bf58b1315f969a269cb503104ae09fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe4719fe471932471900aefeac647aac64e03c00598fad13d9f6a2b82fa3594488f8410f67b7189a14c4df403b58bf601205d096c28d924853399fc5600b80ba50df325cb982ae09906faefe98007a9800dc7af02366c3fcf02e8010bd708e493b84ca74608ac7aaadbce1e0c97df29382e6ee12ce7f712498821f7bce85d13f557d1f4a315522540e5f")
	assert.NoError(t, err)

	assert.NoError(t, err)

	b := new(primitives.Block)
	err = b.Unmarshal(blockRaw)
	assert.NoError(t, err)

	assert.Equal(t, "8cdaa318f6517ca0e8a43c552a08d58cab7dc7d2ff24b7e8051d84b2a36786d1", b.VotesMerkleRoot().String())
	assert.Equal(t, "de08a16f82927407d02b2ae9f48be3eecb7930b311879013c7a07be49de879b1", b.DepositMerkleRoot().String())
	assert.Equal(t, "dfafbe318b68c17630f15f88b6615422bb5aa86eb47556bb71c7a95e5dc153cc", b.ExitMerkleRoot().String())
	assert.Equal(t, "aaf9636f9d46e5b03e68e8d13565a0f50fa9a2d46d954df41571df49c24ae47d", b.PartialExitsMerkleRoot().String())
	assert.Equal(t, "a52db045888da0b40cbb9615839d89184f51bc7d69ac460d77163aa2b05c8e41", b.TxsMerkleRoot().String())
	assert.Equal(t, "39078917614bb98753c6f26ba5d14fec6fdd582e0407294e68e5d733c7d0740c", b.VoteSlashingRoot().String())
	assert.Equal(t, "73a33d564eaf4635c46de5ebdfd5952ef62eaf108fe2f98b156459010fe9780d", b.ProposerSlashingsRoot().String())
	assert.Equal(t, "03abc8197474632f68633f66257885fa12905b4bf9c942baa8b21cc70459108b", b.RANDAOSlashingsRoot().String())

	expectedTx := []string{"cfa0ef9c719b9953d312c52c75c1d04df9aceb4547ed9877ab3aaeb2c0a47177", "b4f0dfdc370a181d58acbd6af3345019d3de8ab25413847f578f2ae350586eb9"}
	txs := b.GetTxs()

	assert.Equal(t, expectedTx[0], txs[0])
	assert.Equal(t, expectedTx[1], txs[1])
}
